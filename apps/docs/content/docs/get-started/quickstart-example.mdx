---
title: Quickstart Example
description: Guiding you through the process of using Erebus.
---
import { Step, Steps } from 'fumadocs-ui/components/steps';


# Quickstart Example - Publish and Subscribe to a channel with next.js
To start using Erebus, all you need is three components:
- API Endpoint to generate a token for the client using your own api keys
- A client files you declare types and channels in
- A page to subscribe to the channel

<Steps>

<Step>
First create a api endpoint to generate a token for the client using your own api keys.
<Tabs items={["next-js"]}>
  <Tab value="next-js">
 ```typescript title="/app/api/generate-token/route.ts"
import { ErebusService, Access } from "@erebus-sh/sdk/service";
import { createRouteHandler } from "@erebus-sh/sdk/server/next";
import { cookies } from "next/headers";

export const { POST } = createRouteHandler({
  authorize: async (channel, ctx) => {
    const ckis = await cookies();
    const userId = ckis.get("x-User-Id")?.value;
    if (!userId) {
      throw new Error("Missing user id");
    }
    const service = new ErebusService({
      secret_api_key: "dv-er-4o7j90qw39p96bra19fa94prupp6vdcg9axrd3hg4hqy68c1",
      base_url: "http://localhost:3000",
    });
    const session = await service.prepareSession({
      userId,
    });
    session.join(channel);
    session.allow("rm_123", Access.ReadWrite);
    return session;
  },
});
``` 
 </Tab>
</Tabs>
</Step>
<Step>
 ```typescript title="/erebus/client.ts"
import { createErebus } from "@erebus-sh/sdk/react";
import { z } from "zod";

const { useSubscribe } = createErebus({
  room: z.object({
    message: z.string(),
    sentAt: z.number(),
  }),
});

export default useSubscribe;
```
</Step>


<Step>
 ```typescript title="app/page.tsx"
"use client";

import { useState } from "react";
import useSubscribe from "@/erebus/client";

export default function Home() {
  const [input, setInput] = useState("");
  const topic = "rm_123";

  const {
    messages,
    publishAck,
    subscriptionStatus,
    connectionStatus,
    isReady,
  } = useSubscribe("room", topic, (presence) => {
    if (presence.status === "online") {
      console.log(`Client ${presence.clientId} is online at ${presence.timestamp} in topic ${presence.topic}`);
    } else {
      console.log(`Client ${presence.clientId} is offline at ${presence.timestamp} in topic ${presence.topic}`);
    }
  });
  return (
    ...
  )
}
```
</Step>
</Steps>