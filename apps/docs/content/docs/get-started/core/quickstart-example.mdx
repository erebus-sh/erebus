---
title: Quickstart Example
description: Guiding you through the process of using Erebus.
---
import { Step, Steps } from 'fumadocs-ui/components/steps';
import { Callout } from 'fumadocs-ui/components/callout';


# Quickstart: Publish & Subscribe with the Core SDK
Getting started with Erebus takes just a few steps:
- An API endpoint that creates tokens for your clients using your [API keys](/docs/platform/api-keys)

<Callout title="Install" type="info">
In this example for the API endpoint I will be using Bun.Serve, you can use any other server framework you prefer.
</Callout>

```package-install
@erebus-sh/sdk
```

<Steps>
<Step>
First, create a client instance. Specify the client type and your auth domain (`authBaseUrl`).
If youâ€™re running locally, also set the `wsBaseUrl`; otherwise it defaults to `wss://gateway.erebus.sh`.
```typescript title="index.ts"
import { ErebusClient, ErebusClientState } from "@erebus-sh/sdk/client";

const client = ErebusClient.createClient({
  client: ErebusClientState.PubSub,
  authBaseUrl: "http://localhost:3000",  // your auth domain
  wsBaseUrl: "ws://localhost:8787",  // your ws domain (optional if you self-host locally)
});
...
```
</Step>

<Step>
Create the adapter instance. The authorize function is used to authorize the client to join the channel and allow the topics.
<Callout title="Fire Webhook" type="info">
The fireWebhook function is used to handle the webhook messages, when any webhook publish happens in the service, it will fire it there.
Just make sure you specify the base domain in the platform project settings.
</Callout>

```typescript title="index.ts"
// ... Previous code ...
// Imports go to top of the file ofc
import { createGenericAdapter } from "@erebus-sh/sdk/server";
import { Access, ErebusService } from "@erebus-sh/sdk/service";
import Bun from "bun";

const SECRET_API_KEY = process.env.SECRET_API_KEY || "demo-secret-key"; // replace with your own secret_api_key from the platform


const app = createGenericAdapter({
  authorize: async (channel, ctx) => {
    // Normally you'd check cookies, headers, or DB here
    const userId = "demo-user";

    const service = new ErebusService({
      secret_api_key: SECRET_API_KEY,
      base_url: "http://localhost:3000", // where your service is running
    });

    // Create a session for this user
    const session = await service.prepareSession({ userId });

    // Join the requested channel
    session.join(channel);

    // Allow reads + writes
    session.allow("*", Access.ReadWrite);

    return session;
  },
  fireWebhook: async (message) => {
    // You can handle the webhook message here
  },
});

Bun.serve({
  port: 3000,
  fetch: app.fetch,
});

console.log("âœ… Auth server running at http://localhost:3000");

```
</Step>

<Step>
Now create your main functon and start using the client.
<Callout title="Join a channel first" type="info">
You need to join a channel first before you can subscribe to it.
Refer to the [Channels](/docs/concepts/channels) section for more information.
</Callout>
```typescript title="index.ts"
// ... Previous code ...

async function main() {
  // Join a channel first
  client.joinChannel("firstChannel");
  // Connect
  await client.connect();

  // Subscribe to a channel
  client.subscribe("room-1", (msg) => {
    console.log("ðŸ“© Received:", msg.payload, "from", msg.senderId);
  });

  // Publish a message
  await client.publishWithAck({
    topic: "hello-world",
    messageBody: "Hello Erebus ðŸ‘‹",
    onAck: (ack) => {
      console.log("âœ… Message acknowledged:", ack.ack);
    },
  });
}

main().catch(console.error);
```
</Step>

</Steps>